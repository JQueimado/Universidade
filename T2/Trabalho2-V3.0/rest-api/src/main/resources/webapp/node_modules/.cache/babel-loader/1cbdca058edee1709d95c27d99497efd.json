{"ast":null,"code":"import _regeneratorRuntime from\"/home/joao/Desktop/so2-2020/T2/Trabalho2-V3.0/rest-api/src/main/resources/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/joao/Desktop/so2-2020/T2/Trabalho2-V3.0/rest-api/src/main/resources/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/joao/Desktop/so2-2020/T2/Trabalho2-V3.0/rest-api/src/main/resources/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/joao/Desktop/so2-2020/T2/Trabalho2-V3.0/rest-api/src/main/resources/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/joao/Desktop/so2-2020/T2/Trabalho2-V3.0/rest-api/src/main/resources/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/joao/Desktop/so2-2020/T2/Trabalho2-V3.0/rest-api/src/main/resources/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/joao/Desktop/so2-2020/T2/Trabalho2-V3.0/rest-api/src/main/resources/webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Route,NavLink,HashRouter}from\"react-router-dom\";import axios from\"axios\";//Components\nimport Home from\"./Home\";import Registry from\"./Registry\";import SignIn from\"./SignIn\";import LogIn from\"./LogIn\";import Contact from\"./Contact\";var config={api:\"https://localhost:8443\"};var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(props){var _this;_classCallCheck(this,Main);_this=_super.call(this,props);_this.state={token:\"\",logedin:false,superMarkets:[],registries:[]};//Method Binding\n_this.login=_this.login.bind(_assertThisInitialized(_this));_this.logout=_this.logout.bind(_assertThisInitialized(_this));_this.getsupermarkets=_this.getsupermarkets.bind(_assertThisInitialized(_this));_this.getregistries=_this.getregistries.bind(_assertThisInitialized(_this));//Axios\naxios.defaults.baseURL=config.api;axios.defaults.headers.post[\"Content-Type\"]=\"application/json;charset=utf-8\";return _this;}//Methods\n//Login\n_createClass(Main,[{key:\"login\",value:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username,password){var temp,body,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!this.state.logedin){_context.next=2;break;}return _context.abrupt(\"return\",false);case 2:temp=false;body={username:username,password:password};_context.next=6;return axios.post(\"/login\",body);case 6:response=_context.sent;if(response.status==200){this.setState({token:\"Bearer \"+response.data.token,logedin:true});console.log(\"got here\");temp=true;}return _context.abrupt(\"return\",temp);case 9:case\"end\":return _context.stop();}}},_callee,this);}));function login(_x,_x2){return _login.apply(this,arguments);}return login;}()//Logout\n},{key:\"logout\",value:function(){var _logout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var temp,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(this.state.logedin){_context2.next=2;break;}return _context2.abrupt(\"return\",false);case 2:temp=false;_context2.next=5;return axios.post(\"/logoutUser\",{method:\"logout\"},{headers:{Authorization:this.state.token}});case 5:response=_context2.sent;if(response.status==200){this.setState({token:\"\",logedin:false});temp=true;}return _context2.abrupt(\"return\",temp);case 8:case\"end\":return _context2.stop();}}},_callee2,this);}));function logout(){return _logout.apply(this,arguments);}return logout;}()//Supermarkets\n},{key:\"getsupermarkets\",value:function(){var _getsupermarkets=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(time){var _this2=this;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(\"/supermarkets/\"+time).then(function(response){_this2.setState({superMarkets:response.data});return true;}).catch(function(err){console.log(err);return false;});case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}}},_callee3);}));function getsupermarkets(_x3){return _getsupermarkets.apply(this,arguments);}return getsupermarkets;}()//Registries\n},{key:\"getregistries\",value:function(){var _getregistries=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _this3=this;var temp;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(this.state.logedin){_context4.next=2;break;}return _context4.abrupt(\"return\",false);case 2:temp=false;_context4.next=5;return axios.get(\"/registries/user\",{headers:{Authorization:this.state.token}}).then(function(response){_this3.setState({response:response.data});temp=true;}).catch(function(err){temp=false;});case 5:return _context4.abrupt(\"return\",temp);case 6:case\"end\":return _context4.stop();}}},_callee4,this);}));function getregistries(){return _getregistries.apply(this,arguments);}return getregistries;}()//Render\n},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(HashRouter,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Ocupa\\xE7\\xE3o de Espa\\xE7os Comerciais\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"header\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{exact:true,to:\"/home\"},\"Home\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"/registry\"},\"Registry\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"/signin\"},\"Sign In\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"/login\"},\"Log In\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(NavLink,{to:\"/contact\"},\"Contact\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/home\",component:Home}),/*#__PURE__*/React.createElement(Route,{path:\"/registry\",component:Registry}),/*#__PURE__*/React.createElement(Route,{path:\"/signin\",component:function component(){return/*#__PURE__*/React.createElement(SignIn,null);}}),/*#__PURE__*/React.createElement(Route,{path:\"/login\",component:function component(){return/*#__PURE__*/React.createElement(LogIn,{login:function login(username,password){return _this4.login(username,password);},logout:function logout(){return _this4.logout();}});}}),/*#__PURE__*/React.createElement(Route,{path:\"/contact\",component:Contact}))));}}]);return Main;}(Component);export default Main;","map":{"version":3,"sources":["/home/joao/Desktop/so2-2020/T2/Trabalho2-V3.0/rest-api/src/main/resources/webapp/src/Main.js"],"names":["React","Component","Route","NavLink","HashRouter","axios","Home","Registry","SignIn","LogIn","Contact","config","api","Main","props","state","token","logedin","superMarkets","registries","login","bind","logout","getsupermarkets","getregistries","defaults","baseURL","headers","post","username","password","temp","body","response","status","setState","data","console","log","method","Authorization","time","get","then","catch","err"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Route, NavLink, HashRouter } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\n//Components\r\nimport Home from \"./Home\";\r\nimport Registry from \"./Registry\";\r\nimport SignIn from \"./SignIn\";\r\nimport LogIn from \"./LogIn\";\r\nimport Contact from \"./Contact\";\r\n\r\nconst config = {\r\n    api: \"https://localhost:8443\",\r\n};\r\n\r\nclass Main extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            token: \"\",\r\n            logedin: false,\r\n            superMarkets: [],\r\n            registries: [],\r\n        };\r\n\r\n        //Method Binding\r\n        this.login = this.login.bind(this);\r\n        this.logout = this.logout.bind(this);\r\n        this.getsupermarkets = this.getsupermarkets.bind(this);\r\n        this.getregistries = this.getregistries.bind(this);\r\n\r\n        //Axios\r\n        axios.defaults.baseURL = config.api;\r\n        axios.defaults.headers.post[\"Content-Type\"] =\r\n            \"application/json;charset=utf-8\";\r\n    }\r\n\r\n    //Methods\r\n    //Login\r\n    async login(username, password) {\r\n        if (this.state.logedin) return false;\r\n\r\n        var temp = false;\r\n\r\n        let body = {\r\n            username: username,\r\n            password: password,\r\n        };\r\n\r\n        let response = await axios.post(\"/login\", body);\r\n\r\n        if (response.status == 200) {\r\n            this.setState({\r\n                token: \"Bearer \" + response.data.token,\r\n                logedin: true,\r\n            });\r\n            console.log(\"got here\");\r\n            temp = true;\r\n        }\r\n\r\n        return temp;\r\n    }\r\n\r\n    //Logout\r\n    async logout() {\r\n        if (!this.state.logedin) return false;\r\n\r\n        var temp = false;\r\n\r\n        let response = await axios.post(\r\n            \"/logoutUser\",\r\n            { method: \"logout\" },\r\n            { headers: { Authorization: this.state.token } }\r\n        );\r\n\r\n        if (response.status == 200) {\r\n            this.setState({ token: \"\", logedin: false });\r\n            temp = true;\r\n        }\r\n\r\n        return temp;\r\n    }\r\n\r\n    //Supermarkets\r\n    async getsupermarkets(time) {\r\n        return await axios\r\n            .get(\"/supermarkets/\" + time)\r\n            .then((response) => {\r\n                this.setState({ superMarkets: response.data });\r\n                return true;\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                return false;\r\n            });\r\n    }\r\n\r\n    //Registries\r\n    async getregistries() {\r\n        if (!this.state.logedin) return false;\r\n\r\n        var temp = false;\r\n\r\n        await axios\r\n            .get(\"/registries/user\", {\r\n                headers: { Authorization: this.state.token },\r\n            })\r\n            .then((response) => {\r\n                this.setState({ response: response.data });\r\n                temp = true;\r\n            })\r\n            .catch((err) => {\r\n                temp = false;\r\n            });\r\n\r\n        return temp;\r\n    }\r\n\r\n    //Render\r\n    render() {\r\n        return (\r\n            <HashRouter>\r\n                <div>\r\n                    <h1>Ocupação de Espaços Comerciais</h1>\r\n\r\n                    <ul className=\"header\">\r\n                        <li>\r\n                            <NavLink exact to=\"/home\">\r\n                                Home\r\n                            </NavLink>\r\n                        </li>\r\n                        <li>\r\n                            <NavLink to=\"/registry\">Registry</NavLink>\r\n                        </li>\r\n                        <li>\r\n                            <NavLink to=\"/signin\">Sign In</NavLink>\r\n                        </li>\r\n                        <li>\r\n                            <NavLink to=\"/login\">Log In</NavLink>\r\n                        </li>\r\n                        <li>\r\n                            <NavLink to=\"/contact\">Contact</NavLink>\r\n                        </li>\r\n                    </ul>\r\n                    <div className=\"content\">\r\n                        <Route exact path=\"/home\" component={Home} />\r\n                        <Route path=\"/registry\" component={Registry} />\r\n                        <Route path=\"/signin\" component={() => <SignIn />} />\r\n                        <Route\r\n                            path=\"/login\"\r\n                            component={() => (\r\n                                <LogIn\r\n                                    login={(username, password) =>\r\n                                        this.login(username, password)\r\n                                    }\r\n                                    logout={() => this.logout()}\r\n                                />\r\n                            )}\r\n                        />\r\n                        <Route path=\"/contact\" component={Contact} />\r\n                    </div>\r\n                </div>\r\n            </HashRouter>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Main;\r\n"]},"metadata":{},"sourceType":"module"}