(this.webpackJsonpreactwebapp=this.webpackJsonpreactwebapp||[]).push([[0],{10:function(e,r,t){e.exports=t(16)},15:function(e,r,t){},16:function(e,r,t){"use strict";t.r(r);var a=t(0),n=t.n(a),s=t(8),o=t.n(s),c=(t(15),t(1)),u=t(6),i=t(2),l=t(3),m=t(4),h=t(5),p=t(9),f=function(e){Object(h.a)(t,e);var r=Object(m.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=r.call(this,e)).state={value:e.value?e.value:"",className:e.className?e.className:"",error:!1},a}return Object(l.a)(t,[{key:"render",value:function(){var e=this.props,r=e.handleError,t=Object(p.a)(e,["handleError"]);return this.handleError=r,n.a.createElement("input",Object.assign({},t,{value:this.state.value,onChange:this.inputChange,className:this.state.className}))}}]),t}(a.Component),d=function(e){Object(h.a)(t,e);var r=Object(m.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=r.call(this,e)).handleError=function(e,r){e&&(r?a.setState((function(t){return{failure:"",errcount:t.errcount+1,errmsgs:Object(u.a)({},t.errmsgs,Object(c.a)({},e,r))}})):a.setState((function(r){return{failure:"",errcount:1===r.errcount?0:r.errcount-1,errmsgs:Object(u.a)({},r.errmsgs,Object(c.a)({},e,""))}})))},a.renderError=function(){if(a.state.errcount||a.state.failure){var e=a.state.failure||Object.values(a.state.errmsgs).find((function(e){return e}));return n.a.createElement("div",{className:"error"},e)}},a.handleSubmit=function(e){if(e.preventDefault(),!a.state.errcount){var r=new FormData(a.form);fetch(a.form.action,{method:a.form.method,body:new URLSearchParams(r)}).then((function(e){e.redirected&&(window.location=e.url)})).catch((function(e){return console.warn(e)}))}},e.error?a.state={failure:"wrong username or password!",errcount:0}:a.state={errcount:0},a}return Object(l.a)(t,[{key:"render",value:function(){var e=this,r=this.props.inputs.map((function(r,t){var a=r.name,s=r.placeholder,o=r.type,c=r.value,u=r.className;return n.a.createElement(f,{key:t,name:a,placeholder:s,type:o,value:c,className:"submit"===o?u:"",handleError:e.handleError})})),t=this.renderError();return n.a.createElement("form",Object.assign({},this.props,{onSubmit:this.handleSubmit,ref:function(r){e.form=r}}),r,t)}}]),t}(a.Component),b={name:"loginForm",method:"POST",action:"/perform_login",inputs:[{name:"username",placeholder:"username",type:"text"},{name:"password",placeholder:"password",type:"password"},{type:"submit",value:"Submit",className:"btn"}]},v=new URLSearchParams(window.location.search);o.a.render(n.a.createElement(d,Object.assign({},b,{error:v.get("error")})),document.getElementById("container"))}},[[10,1,2]]]);
//# sourceMappingURL=main.e81a6fd8.chunk.js.map